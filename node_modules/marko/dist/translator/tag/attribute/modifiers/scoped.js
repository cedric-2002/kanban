"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule = true;exports.default = void 0;var _compiler = require("@marko/compiler");

var _withPreviousLocation = _interopRequireDefault(require("../../../util/with-previous-location"));

const seen = new WeakSet();var _default = exports.default =

{
  exit(tag, _, value) {
    const {
      hub: { file }
    } = tag;

    if (seen.has(value.node)) {
      return;
    }

    const replacement = (0, _withPreviousLocation.default)(
      _compiler.types.callExpression(
        _compiler.types.memberExpression(file._componentDefIdentifier, _compiler.types.identifier("elId")),
        [value.node]
      ),
      value.node
    );

    seen.add(replacement);
    value.replaceWith(replacement);
  }
};